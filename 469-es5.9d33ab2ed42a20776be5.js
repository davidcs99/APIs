!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?i(t):e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}(self.webpackChunkricky_martin_app=self.webpackChunkricky_martin_app||[]).push([[469],{3778:function(t,e,o){"use strict";o.d(e,{R:function(){return E},X:function(){return K}});var l=o(5614),s=o(878),u=o(7254),f=o(6673),h=o(8870),p=function(){function t(e,n){c(this,t),this.period=e,this.scheduler=n}return a(t,[{key:"call",value:function(t,e){return e.subscribe(new d(t,this.period,this.scheduler))}}]),t}(),d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}(o,t);var e=r(o);function o(t,n,r){var l;return c(this,o),(l=e.call(this,t)).period=n,l.scheduler=r,l.hasValue=!1,l.add(r.schedule(g,n,{subscriber:i(l),period:n})),l}return a(o,[{key:"_next",value:function(t){this.lastValue=t,this.hasValue=!0}},{key:"notifyNext",value:function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}]),o}(f.L);function g(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}var v=o(3982),y=o(9996),m=o(4019),w=o(3835);function S(t,e,n,r){var o=window&&!!window.document&&window.document.documentElement,i=o&&e?window:n;if(t&&!(i=t&&o&&"string"==typeof t?function(t,e,n){return(n?window.document:e).querySelector(t)}(t,n.nativeElement,r):t))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return i}function b(t){return t&&!t.firstChange}var T={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},k={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"},D=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];c(this,t),this.vertical=e,this.propsMap=e?T:k}return a(t,[{key:"clientHeightKey",value:function(){return this.propsMap.clientHeight}},{key:"offsetHeightKey",value:function(){return this.propsMap.offsetHeight}},{key:"scrollHeightKey",value:function(){return this.propsMap.scrollHeight}},{key:"pageYOffsetKey",value:function(){return this.propsMap.pageYOffset}},{key:"offsetTopKey",value:function(){return this.propsMap.offsetTop}},{key:"scrollTopKey",value:function(){return this.propsMap.scrollTop}},{key:"topKey",value:function(){return this.propsMap.top}}]),t}();function O(t){return["Window","global"].some(function(e){return Object.prototype.toString.call(t).includes(e)})}function C(t,e){return t?e.document.documentElement:null}function H(t,e){var n,r,o,i,l=(r=(n=e).container,o=n.isWindow,i=x(n.axis),U(r,o,i.offsetHeightKey,i.clientHeightKey));return e.isWindow?function(t,e,n){var r=n.axis,o=n.container,i=n.isWindow,l=x(r),c=l.offsetHeightKey,s=l.clientHeightKey,a=t+A(C(i,o),r,i),u=U(e.nativeElement,i,c,s);return{height:t,scrolled:a,totalToScroll:function(t,e,n){var r=e.topKey();if(t.getBoundingClientRect)return t.getBoundingClientRect()[r]+A(t,e,n)}(e.nativeElement,r,i)+u,isWindow:i}}(l,t,e):function(t,e,n){var r=n.axis,o=n.container;return{height:t,scrolled:o[r.scrollTopKey()],totalToScroll:o[r.scrollHeightKey()],isWindow:!1}}(l,0,e)}function x(t){return{offsetHeightKey:t.offsetHeightKey(),clientHeightKey:t.clientHeightKey()}}function U(t,e,n,r){if(isNaN(t[n])){var o=C(e,t);return o?o[r]:0}return t[n]}function A(t,e,n){var r=e.pageYOffsetKey(),o=e.scrollTopKey(),i=e.offsetTopKey();return isNaN(window.pageYOffset)?C(n,t)[o]:t.ownerDocument?t.ownerDocument.defaultView[r]:t[i]}function Z(t,e,n){var r,o;if(t.totalToScroll<=0)return!1;var i=t.isWindow?t.scrolled:t.height+t.scrolled;return n?(r=(t.totalToScroll-i)/t.totalToScroll,o=e.down/10):(r=t.scrolled/(t.scrolled+(t.totalToScroll-i)),o=e.up/10),r<=o}var q=function(){function t(e){var n=e.totalToScroll;c(this,t),this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=n}return a(t,[{key:"updateScrollPosition",value:function(t){return this.lastScrollPosition=t}},{key:"updateTotalToScroll",value:function(t){this.lastTotalToScroll!==t&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=t)}},{key:"updateScroll",value:function(t,e){this.updateScrollPosition(t),this.updateTotalToScroll(e)}},{key:"updateTriggeredFlag",value:function(t,e){e?this.triggered.down=t:this.triggered.up=t}},{key:"isTriggeredScroll",value:function(t,e){return e?this.triggered.down===t:this.triggered.up===t}}]),t}();function N(t){return{type:t.scrollDown?"[NGX_ISE] DOWN":"[NGX_ISE] UP",payload:{currentScrollPosition:t.stats.scrolled}}}var E=function(){var t=function(){function t(e,n){c(this,t),this.element=e,this.zone=n,this.scrolled=new l.vpe,this.scrolledUp=new l.vpe,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}return a(t,[{key:"ngAfterViewInit",value:function(){this.infiniteScrollDisabled||this.setup()}},{key:"ngOnChanges",value:function(t){var e=t.infiniteScrollContainer,n=t.infiniteScrollDisabled,r=t.infiniteScrollDistance,o=b(e),i=b(n),l=b(r),c=!i&&!this.infiniteScrollDisabled||i&&!n.currentValue||l;(o||i||l)&&(this.destroyScroller(),c&&this.setup())}},{key:"setup",value:function(){var t=this;"undefined"!=typeof window&&this.zone.runOutsideAngular(function(){var e,n,r,o,i,l,c,a,f,d,g,b;t.disposeScroller=(e={fromRoot:t.fromRoot,alwaysCallback:t.alwaysCallback,disable:t.infiniteScrollDisabled,downDistance:t.infiniteScrollDistance,element:t.element,horizontal:t.horizontal,scrollContainer:t.infiniteScrollContainer,scrollWindow:t.scrollWindow,throttle:t.infiniteScrollThrottle,upDistance:t.infiniteScrollUpDistance},l=e.scrollContainer,c=e.scrollWindow,a=e.element,f=e.fromRoot,d=function(t,e){var n=t.isWindow||e&&!e.nativeElement?e:e.nativeElement;return Object.assign(Object.assign({},t),{container:n})}({axis:(n={axis:new D(!e.horizontal),windowElement:S(l,c,a,f)}).axis,isWindow:O(r=n.windowElement)},r),g=new q({totalToScroll:H(a,d)}),b={up:e.upDistance,down:e.downDistance},(o={container:d.container,throttle:e.throttle},i=(0,u.R)(o.container,"scroll"),o.throttle&&(i=i.pipe(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.P;return function(n){return n.lift(new p(t,e))}}(o.throttle))),i).pipe((0,v.zg)(function(){return(0,s.of)(H(a,d))}),(0,y.U)(function(t){return function(t,e,n){var r=function(t,e,n){var r=function(t,e){return t<e.scrolled}(t,e);return{fire:Z(e,n,r),scrollDown:r}}(t,e,n);return{scrollDown:r.scrollDown,fire:r.fire,stats:e}}(g.lastScrollPosition,t,b)}),(0,m.b)(function(t){var e=t.stats;return g.updateScroll(e.scrolled,e.totalToScroll)}),(0,w.h)(function(t){var n=t.fire,r=t.scrollDown,o=t.stats.totalToScroll;return function(t,e,n){return!(!t||!e)||!(n||!e)}(e.alwaysCallback,n,g.isTriggeredScroll(o,r))}),(0,m.b)(function(t){var e=t.scrollDown,n=t.stats.totalToScroll;g.updateTriggeredFlag(n,e)}),(0,y.U)(N))).subscribe(function(e){return t.zone.run(function(){return t.handleOnScroll(e)})})})}},{key:"handleOnScroll",value:function(t){var e=t.type,n=t.payload;switch(e){case"[NGX_ISE] DOWN":return this.scrolled.emit(n);case"[NGX_ISE] UP":return this.scrolledUp.emit(n);default:return}}},{key:"ngOnDestroy",value:function(){this.destroyScroller()}},{key:"destroyScroller",value:function(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Y36(l.SBq),l.Y36(l.R0b))},t.\u0275dir=l.lG2({type:t,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[l.TTD]}),t}(),K=function(){var t=function t(){c(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({providers:[],imports:[[]]}),t}()},469:function(e,n,r){"use strict";r.d(n,{u:function(){return y}});var o=r(1116),i=r(3160),l=r(3835),s=r(611),u=r(5614),f=r(2651),h=r(3778),p=r(8729);function d(t,e){if(1&t&&(u.TgZ(0,"div",4),u._UZ(1,"app-character",5),u.qZA()),2&t){var n=e.$implicit;u.xp6(1),u.Q6J("character",n)}}function g(t,e){1&t&&(u.TgZ(0,"div",6),u.TgZ(1,"p"),u._uU(2,"No results......."),u.qZA(),u.qZA())}function v(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"button",7),u.NdJ("click",function(){return u.CHM(n),u.oxw().onScrollTop()}),u._uU(1," Go UP\n"),u.qZA()}2&t&&u.Q6J("ngClass","no-hidden")}var y=function(){var e=function(){function e(t,n,r,o){c(this,e),this.document=t,this.characterSvc=n,this.route=r,this.router=o,this.characters=[],this.info={next:null},this.showGoUpButton=!1,this.pageNum=1,this.hideScrollHeight=200,this.showScrollHeight=500,this.onUrlChanged()}return a(e,[{key:"ngOnInit",value:function(){this.getCharactersByQuery()}},{key:"onWindowScroll",value:function(){var t=window.pageYOffset;(t||this.document.documentElement.scrollTop||this.document.body.scrollTop)>this.showScrollHeight?this.showGoUpButton=!0:this.showGoUpButton&&(t||this.document.documentElement.scrollTop||this.document.body.scrollTop)<this.hideScrollHeight&&(this.showGoUpButton=!1)}},{key:"onScrollDown",value:function(){this.info.next&&(this.pageNum++,this.getDataFromService())}},{key:"onScrollTop",value:function(){this.document.body.scrollTop=0,this.document.documentElement.scrollTop=0}},{key:"onUrlChanged",value:function(){var t=this;this.router.events.pipe((0,l.h)(function(t){return t instanceof i.m2})).subscribe(function(){t.characters=[],t.pageNum=1,t.getCharactersByQuery()})}},{key:"getCharactersByQuery",value:function(){var t=this;this.route.queryParams.pipe((0,s.q)(1)).subscribe(function(e){t.query=e.q,t.getDataFromService()})}},{key:"getDataFromService",value:function(){var e=this;this.characterSvc.searchCharacters(this.query,this.pageNum).pipe((0,s.q)(1)).subscribe(function(n){var r;if(null===(r=null==n?void 0:n.results)||void 0===r?void 0:r.length){var o=n.info,i=n.results;e.characters=[].concat(t(e.characters),t(i)),e.info=o}else e.characters=[]},function(t){return console.log(t.friendlyMessage)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(o.K0),u.Y36(f.A),u.Y36(i.gz),u.Y36(i.F0))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-character-list"]],hostBindings:function(t,e){1&t&&u.NdJ("scroll",function(){return e.onWindowScroll()},!1,u.Jf7)},decls:4,vars:3,consts:[["infinite-scroll","",1,"row",3,"scrolled"],["class","col-xs-12 col-sm-6 col-md-4",4,"ngFor","ngForOf"],["class","col-xs-12 col-sm-12 col-md-12 mt-5 container-notFound",4,"ngIf"],["clas","btn btn-dark",3,"ngClass","click",4,"ngIf"],[1,"col-xs-12","col-sm-6","col-md-4"],[3,"character"],[1,"col-xs-12","col-sm-12","col-md-12","mt-5","container-notFound"],["clas","btn btn-dark",3,"ngClass","click"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.NdJ("scrolled",function(){return e.onScrollDown()}),u.YNc(1,d,2,1,"div",1),u.YNc(2,g,3,0,"div",2),u.qZA(),u.YNc(3,v,2,1,"button",3)),2&t&&(u.xp6(1),u.Q6J("ngForOf",e.characters),u.xp6(1),u.Q6J("ngIf",e.characters.length<=0),u.xp6(1),u.Q6J("ngIf",e.showGoUpButton))},directives:[h.R,o.sg,o.O5,p.r,o.mk],styles:[""]}),e}()},8729:function(t,e,n){"use strict";n.d(e,{r:function(){return s}});var r=n(5614),o=n(3160),i=n(1116),l=function(t){return["/character-details",t]},s=function(){var t=function t(){c(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-character"]],inputs:{character:"character"},decls:15,vars:17,consts:[[1,"card"],[1,"image"],[3,"routerLink"],[1,"card-img-top",3,"src","alt"],[1,"card-inner"],[1,"header"],[1,"text-muted"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"a",2),r._UZ(3,"img",3),r.qZA(),r.qZA(),r.TgZ(4,"div",4),r.TgZ(5,"div",5),r.TgZ(6,"a",2),r.TgZ(7,"h2"),r._uU(8),r.ALo(9,"slice"),r.qZA(),r.qZA(),r.TgZ(10,"h4",6),r._uU(11),r.qZA(),r.TgZ(12,"small",6),r._uU(13),r.ALo(14,"date"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(2),r.Q6J("routerLink",r.VKq(13,l,e.character.id)),r.xp6(1),r.Q6J("src",e.character.image,r.LSH)("alt",e.character.name),r.xp6(3),r.Q6J("routerLink",r.VKq(15,l,e.character.id)),r.xp6(2),r.Oqu(r.Dn7(9,7,e.character.name,0,15)),r.xp6(3),r.Oqu(e.character.gender),r.xp6(2),r.Oqu(r.lcZ(14,11,e.character.created)))},directives:[o.yS],pipes:[i.OU,i.uU],encapsulation:2,changeDetection:0}),t}()},2651:function(t,e,n){"use strict";n.d(e,{A:function(){return f}});var r=n(1225),o=n(529),i=function t(){c(this,t)},l=n(7727),s=n(5614),u=n(2693),f=function(){var t=function(){function t(e){c(this,t),this.http=e}return a(t,[{key:"searchCharacters",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return this.http.get("".concat(o.N.baseUrlAPI,"/?name=").concat(e,"&page=").concat(n)).pipe((0,l.K)(function(e){return t.handleHttpError(e)}))}},{key:"getDetails",value:function(t){var e=this;return this.http.get("".concat(o.N.baseUrlAPI,"/").concat(t)).pipe((0,l.K)(function(t){return e.handleHttpError(t)}))}},{key:"handleHttpError",value:function(t){var e=new i;return e.errorNumber=t.status,e.message=t.statusText,e.friendlyMessage="An error occured retrienving data.",(0,r._)(e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.LFG(u.eN))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();