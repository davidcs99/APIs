(self.webpackChunkricky_martin_app=self.webpackChunkricky_martin_app||[]).push([[469],{3778:function(t,e,o){"use strict";o.d(e,{R:function(){return q},X:function(){return N}});var i=o(5614),r=o(878),n=o(7254),s=o(6673),l=o(8870);class c{constructor(t,e){this.period=t,this.scheduler=e}call(t,e){return e.subscribe(new a(t,this.period,this.scheduler))}}class a extends s.L{constructor(t,e,o){super(t),this.period=e,this.scheduler=o,this.hasValue=!1,this.add(o.schedule(h,e,{subscriber:this,period:e}))}_next(t){this.lastValue=t,this.hasValue=!0}notifyNext(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}function h(t){let{subscriber:e,period:o}=t;e.notifyNext(),this.schedule(t,o)}var u=o(3982),d=o(9996),f=o(4019),p=o(3835);function g(t,e,o,i){const r=window&&!!window.document&&window.document.documentElement;let n=r&&e?window:o;if(t&&(n=t&&r&&"string"==typeof t?function(t,e,o){return(o?window.document:e).querySelector(t)}(t,o.nativeElement,i):t,!n))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return n}function m(t){return t&&!t.firstChange}const S={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},w={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class T{constructor(t=!0){this.vertical=t,this.propsMap=t?S:w}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function y(t){return["Window","global"].some(e=>Object.prototype.toString.call(t).includes(e))}function b(t,e){return t?e.document.documentElement:null}function v(t,e){const o=function({container:t,isWindow:e,axis:o}){const{offsetHeightKey:i,clientHeightKey:r}=D(o);return C(t,e,i,r)}(e);return e.isWindow?function(t,e,o){const{axis:i,container:r,isWindow:n}=o,{offsetHeightKey:s,clientHeightKey:l}=D(i),c=t+H(b(n,r),i,n),a=C(e.nativeElement,n,s,l);return{height:t,scrolled:c,totalToScroll:function(t,e,o){const i=e.topKey();if(t.getBoundingClientRect)return t.getBoundingClientRect()[i]+H(t,e,o)}(e.nativeElement,i,n)+a,isWindow:n}}(o,t,e):function(t,e,o){const{axis:i,container:r}=o;return{height:t,scrolled:r[i.scrollTopKey()],totalToScroll:r[i.scrollHeightKey()],isWindow:!1}}(o,0,e)}function D(t){return{offsetHeightKey:t.offsetHeightKey(),clientHeightKey:t.clientHeightKey()}}function C(t,e,o,i){if(isNaN(t[o])){const o=b(e,t);return o?o[i]:0}return t[o]}function H(t,e,o){const i=e.pageYOffsetKey(),r=e.scrollTopKey(),n=e.offsetTopKey();return isNaN(window.pageYOffset)?b(o,t)[r]:t.ownerDocument?t.ownerDocument.defaultView[i]:t[n]}function x(t,e,o){let i,r;if(t.totalToScroll<=0)return!1;const n=t.isWindow?t.scrolled:t.height+t.scrolled;return o?(i=(t.totalToScroll-n)/t.totalToScroll,r=e.down/10):(i=t.scrolled/(t.scrolled+(t.totalToScroll-n)),r=e.up/10),i<=r}class U{constructor({totalToScroll:t}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=t}updateScrollPosition(t){return this.lastScrollPosition=t}updateTotalToScroll(t){this.lastTotalToScroll!==t&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=t)}updateScroll(t,e){this.updateScrollPosition(t),this.updateTotalToScroll(e)}updateTriggeredFlag(t,e){e?this.triggered.down=t:this.triggered.up=t}isTriggeredScroll(t,e){return e?this.triggered.down===t:this.triggered.up===t}}function Z(t){const{scrollDown:e,stats:{scrolled:o}}=t;return{type:e?"[NGX_ISE] DOWN":"[NGX_ISE] UP",payload:{currentScrollPosition:o}}}let q=(()=>{class t{constructor(t,e){this.element=t,this.zone=e,this.scrolled=new i.vpe,this.scrolledUp=new i.vpe,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:t,infiniteScrollDisabled:e,infiniteScrollDistance:o}){const i=m(t),r=m(e),n=m(o),s=!r&&!this.infiniteScrollDisabled||r&&!e.currentValue||n;(i||r||n)&&(this.destroyScroller(),s&&this.setup())}setup(){"undefined"!=typeof window&&this.zone.runOutsideAngular(()=>{this.disposeScroller=function(t){const{scrollContainer:e,scrollWindow:o,element:i,fromRoot:s}=t,a=function({windowElement:t,axis:e}){return function(t,e){const o=t.isWindow||e&&!e.nativeElement?e:e.nativeElement;return Object.assign(Object.assign({},t),{container:o})}({axis:e,isWindow:y(t)},t)}({axis:new T(!t.horizontal),windowElement:g(e,o,i,s)}),h=new U({totalToScroll:v(i,a)}),m={up:t.upDistance,down:t.downDistance};return function(t){let e=(0,n.R)(t.container,"scroll");return t.throttle&&(e=e.pipe(function(t,e=l.P){return o=>o.lift(new c(t,e))}(t.throttle))),e}({container:a.container,throttle:t.throttle}).pipe((0,u.zg)(()=>(0,r.of)(v(i,a))),(0,d.U)(t=>function(t,e,o){const{scrollDown:i,fire:r}=function(t,e,o){const i=function(t,e){return t<e.scrolled}(t,e);return{fire:x(e,o,i),scrollDown:i}}(t,e,o);return{scrollDown:i,fire:r,stats:e}}(h.lastScrollPosition,t,m)),(0,f.b)(({stats:t})=>h.updateScroll(t.scrolled,t.totalToScroll)),(0,p.h)(({fire:e,scrollDown:o,stats:{totalToScroll:i}})=>function(t,e,o){return!(!t||!e)||!(o||!e)}(t.alwaysCallback,e,h.isTriggeredScroll(i,o))),(0,f.b)(({scrollDown:t,stats:{totalToScroll:e}})=>{h.updateTriggeredFlag(e,t)}),(0,d.U)(Z))}({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(t=>this.zone.run(()=>this.handleOnScroll(t)))})}handleOnScroll({type:t,payload:e}){switch(t){case"[NGX_ISE] DOWN":return this.scrolled.emit(e);case"[NGX_ISE] UP":return this.scrolledUp.emit(e);default:return}}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(i.SBq),i.Y36(i.R0b))},t.\u0275dir=i.lG2({type:t,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[i.TTD]}),t})(),N=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({providers:[],imports:[[]]}),t})()},469:function(t,e,o){"use strict";o.d(e,{u:function(){return p}});var i=o(1116),r=o(3160),n=o(3835),s=o(611),l=o(5614),c=o(2651),a=o(3778),h=o(8729);function u(t,e){if(1&t&&(l.TgZ(0,"div",4),l._UZ(1,"app-character",5),l.qZA()),2&t){const t=e.$implicit;l.xp6(1),l.Q6J("character",t)}}function d(t,e){1&t&&(l.TgZ(0,"div",6),l.TgZ(1,"p"),l._uU(2,"No results......."),l.qZA(),l.qZA())}function f(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"button",7),l.NdJ("click",function(){return l.CHM(t),l.oxw().onScrollTop()}),l._uU(1," Go UP\n"),l.qZA()}2&t&&l.Q6J("ngClass","no-hidden")}let p=(()=>{class t{constructor(t,e,o,i){this.document=t,this.characterSvc=e,this.route=o,this.router=i,this.characters=[],this.info={next:null},this.showGoUpButton=!1,this.pageNum=1,this.hideScrollHeight=200,this.showScrollHeight=500,this.onUrlChanged()}ngOnInit(){this.getCharactersByQuery()}onWindowScroll(){const t=window.pageYOffset;(t||this.document.documentElement.scrollTop||this.document.body.scrollTop)>this.showScrollHeight?this.showGoUpButton=!0:this.showGoUpButton&&(t||this.document.documentElement.scrollTop||this.document.body.scrollTop)<this.hideScrollHeight&&(this.showGoUpButton=!1)}onScrollDown(){this.info.next&&(this.pageNum++,this.getDataFromService())}onScrollTop(){this.document.body.scrollTop=0,this.document.documentElement.scrollTop=0}onUrlChanged(){this.router.events.pipe((0,n.h)(t=>t instanceof r.m2)).subscribe(()=>{this.characters=[],this.pageNum=1,this.getCharactersByQuery()})}getCharactersByQuery(){this.route.queryParams.pipe((0,s.q)(1)).subscribe(t=>{this.query=t.q,this.getDataFromService()})}getDataFromService(){this.characterSvc.searchCharacters(this.query,this.pageNum).pipe((0,s.q)(1)).subscribe(t=>{var e;if(null===(e=null==t?void 0:t.results)||void 0===e?void 0:e.length){const{info:e,results:o}=t;this.characters=[...this.characters,...o],this.info=e}else this.characters=[]},t=>console.log(t.friendlyMessage))}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(i.K0),l.Y36(c.A),l.Y36(r.gz),l.Y36(r.F0))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-character-list"]],hostBindings:function(t,e){1&t&&l.NdJ("scroll",function(){return e.onWindowScroll()},!1,l.Jf7)},decls:4,vars:3,consts:[["infinite-scroll","",1,"row",3,"scrolled"],["class","col-xs-12 col-sm-6 col-md-4",4,"ngFor","ngForOf"],["class","col-xs-12 col-sm-12 col-md-12 mt-5 container-notFound",4,"ngIf"],["clas","btn btn-dark",3,"ngClass","click",4,"ngIf"],[1,"col-xs-12","col-sm-6","col-md-4"],[3,"character"],[1,"col-xs-12","col-sm-12","col-md-12","mt-5","container-notFound"],["clas","btn btn-dark",3,"ngClass","click"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.NdJ("scrolled",function(){return e.onScrollDown()}),l.YNc(1,u,2,1,"div",1),l.YNc(2,d,3,0,"div",2),l.qZA(),l.YNc(3,f,2,1,"button",3)),2&t&&(l.xp6(1),l.Q6J("ngForOf",e.characters),l.xp6(1),l.Q6J("ngIf",e.characters.length<=0),l.xp6(1),l.Q6J("ngIf",e.showGoUpButton))},directives:[a.R,i.sg,i.O5,h.r,i.mk],styles:[""]}),t})()},8729:function(t,e,o){"use strict";o.d(e,{r:function(){return l}});var i=o(5614),r=o(3160),n=o(1116);const s=function(t){return["/character-details",t]};let l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-character"]],inputs:{character:"character"},decls:15,vars:17,consts:[[1,"card"],[1,"image"],[3,"routerLink"],[1,"card-img-top",3,"src","alt"],[1,"card-inner"],[1,"header"],[1,"text-muted"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"a",2),i._UZ(3,"img",3),i.qZA(),i.qZA(),i.TgZ(4,"div",4),i.TgZ(5,"div",5),i.TgZ(6,"a",2),i.TgZ(7,"h2"),i._uU(8),i.ALo(9,"slice"),i.qZA(),i.qZA(),i.TgZ(10,"h4",6),i._uU(11),i.qZA(),i.TgZ(12,"small",6),i._uU(13),i.ALo(14,"date"),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&t&&(i.xp6(2),i.Q6J("routerLink",i.VKq(13,s,e.character.id)),i.xp6(1),i.Q6J("src",e.character.image,i.LSH)("alt",e.character.name),i.xp6(3),i.Q6J("routerLink",i.VKq(15,s,e.character.id)),i.xp6(2),i.Oqu(i.Dn7(9,7,e.character.name,0,15)),i.xp6(3),i.Oqu(e.character.gender),i.xp6(2),i.Oqu(i.lcZ(14,11,e.character.created)))},directives:[r.yS],pipes:[n.OU,n.uU],encapsulation:2,changeDetection:0}),t})()},2651:function(t,e,o){"use strict";o.d(e,{A:function(){return a}});var i=o(1225),r=o(529);class n{}var s=o(7727),l=o(5614),c=o(2693);let a=(()=>{class t{constructor(t){this.http=t}searchCharacters(t="",e=200){return this.http.get(`${r.N.baseUrlAPI}/?name=${t}&page=${e}`).pipe((0,s.K)(t=>this.handleHttpError(t)))}getDetails(t){return this.http.get(`${r.N.baseUrlAPI}/${t}`).pipe((0,s.K)(t=>this.handleHttpError(t)))}handleHttpError(t){let e=new n;return e.errorNumber=t.status,e.message=t.statusText,e.friendlyMessage="An error occured retrienving data.",(0,i._)(e)}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(c.eN))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);